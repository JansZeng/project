<!DOCTYPE html>
<html lang="en">

<head>
	<title>alipay风控检测</title>
	<meta name="keywords" content="">
	<meta name="description" content="">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
	<meta name="renderer" content="webkit">
	<meta content="yes" name="apple-mobile-web-app-capable">
	<meta content="black" name="apple-mobile-web-app-status-bar-style">
	<meta content="telephone=no" name="format-detection">
	<meta content="email=no" name="format-detection">
	<meta content="QQ:1033383881" name="author" />
	<link rel="stylesheet" href="../../static/css/base.css">
	<script type="text/javascript" src="../../static/js/jquery-1.11.1.min.js"></script>
	<!--<script type="text/javascript" src="../../static/js/ie/3.7.3/html5shiv.min.js"></script>-->

    <script typet="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

	<script type="text/javascript" src="../../static/js/ie/1.4.2/respond.min.js"></script>
	<!--<link href="../../../static/css/base.css" type="text/css" rel="stylesheet">-->
	<!--<script type="text/javascript" src="../../../static/js/jquery-1.11.1.min.js"></script>-->
	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	<!--<script src="../../../static/js/ie/3.7.3/html5shiv.min.js"></script>-->
	<!--<script src="../../../static/js/ie/1.4.2/respond.min.js"></script>-->
	<![endif]-->
	<script type="text/javascript">
		!function (e, t) { function n() { var n = l.getBoundingClientRect().width; t = t || 540, n > t && (n = t); var i = 100 * n / e; r.innerHTML = "html{font-size:" + i + "px;}" } var i, d = document, o = window, l = d.documentElement, r = document.createElement("style"); if (l.firstElementChild) l.firstElementChild.appendChild(r); else { var a = d.createElement("div"); a.appendChild(r), d.write(a.innerHTML), a = null } n(), o.addEventListener("resize", function () { clearTimeout(i), i = setTimeout(n, 300) }, !1), o.addEventListener("pageshow", function (e) { e.persisted && (clearTimeout(i), i = setTimeout(n, 300)) }, !1), "complete" === d.readyState ? d.body.style.fontSize = "16px" : d.addEventListener("DOMContentLoaded", function (e) { d.body.style.fontSize = "16px" }, !1) }(750, 750);
	</script>
	<script>
		//接收views传递的json数据
		var aaa = JSON.parse('{{ List|safe }}');
		var time = parseInt(aaa[2]);  //风控时间 parseInt字符串转换int
		// time = 1;  //风控时间 parseInt字符串转换int
  		//alert('检测支付宝风控中...');  //页面弹窗
		// var url= aaa[3];
		var atxt="解锁完成确认支付";
		$(function () {
		//	window.location.href = url;
			alert('检测支付宝风控中...');
			setInterval(function () {
				getTimes();
			}, 1000);

			// $('#daojishi').click(function(){
             //    //读取views数据绑定url
			// window.location.href = 'http://www.baidu.com';
			// });
			$('#daojishi').click(function(){
                ifr('iframeDiv','project/Django_web/API/templates/childPage.html');
                $('#iframeDiv').find('iframe').load(function(){
                    $(this)[0].contentWindow.setHText('我是子页面');   //父页面调用子页面方法
                });

            });

            // 父页面中增加iframe
            function ifrPoint(Id, Src) {
                $("#" + Id).find('iframe').remove();
                var tag = "<iframe style='width: 100%;height:100%;' frameborder='0' scrolling='auto'></iframe>";
                $("#" + Id).append(tag).find('iframe').attr('src', Src);
            }
            // 给增加的iframe根据内容设置多余高度
            function setIfrHeight(Id, num) {
                $("#" + Id).find('iframe').on('load', function() {
                    var Num = 0;
                    if (num != undefined) {
                        Num = num;
                    }
                    $(this).height($(this).contents().find('body').height() + Num); //contents,jq方法,返回所有子节点,也能访问iframe中的html
                });
            }
            // 父页面增加iframe节点并自适应
            function ifr(Id, Src, num) {
                ifrPoint(Id, Src);
                setIfrHeight(Id, num);
            }

		});
		//倒计时
		function getTimes() {
		//	alert('检测支付宝风控中...');  //页面弹窗
			if (time === 0) {
				$('#daojishi').removeAttr("disabled");
				$('#daojishi').text(atxt);
				document.getElementById("daojishi").style.fontWeight='bold';
				document.getElementById("daojishi").style.color='#fff';
				//改变背景颜色
				document.getElementById("daojishi").style.backgroundColor='#10B11A';
				return;
			} else {
				time--;
				document.getElementById("daojishi").style.fontWeight='bold';
				$('#daojishi').text('正在解锁风控:('+time+')');
			}
		}
	</script>

</head>

<body>
	<div id="header_kuang" class="">
		<div id="header" class="">
			<div class="wen_1">
				<span>正在为您解锁支付宝风控</span>
			</div>
			<div class="wen_2">
				<span>倒计时结束后,请点击下方按钮进行付款</span>
			</div>
			<div class="wen_3">
				<!--读取views模板传递过来的数据-->
				<span><b>收款人:{{ user_list }}</b></span>				
			</div>
			<div id="iframeDiv" style="margin-top:10px; height:200px;"></div>
			<button id="daojishi" style="color:#f91a0c;" disabled="disabled">
				<b>风控检测中...</b>
			</button>
		</div>
	</div>

	<div id="banner_kuang">
		<div id="banner">
			<div class="wen_4">
				<p>温馨提示</p>
			</div>
			<div class="wen_5">
				<font color="#0958AF" size="2">
					<b>1.支付宝正在为您排除可疑交易,请耐心等待。</b>
				</font>
			</div>
			<div class="wen_6">
				<font color="#0958AF" size="2">
					<b>2.风险排除后,点击付款按钮进行付款。如遇任何问题,请联系收款方。</b>
				</font>
			</div>
		</div>
	</div>

</body>
<html>
